import React, {
  createContext,
  useContext,
  useState,
  ReactNode,
  FC,
} from "react";

export type Language = "ru" | "en";

export interface TranslationShape {
  [key: string]: string;
}

export type TranslationKey = keyof TranslationShape;

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: TranslationKey) => string;
}

export const LanguageContext = createContext<LanguageContextType>({
  language: "ru", // Default language
  setLanguage: () => {}, // No-op setLanguage
  t: (key: TranslationKey) => String(key), // Returns the key as string if translation is missing
});

export const LanguageProvider: FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>("ru");

  const t = (key: TranslationKey): string => {
    return translations[language][key] || String(key);
  };

  const contextValue: LanguageContextType = {
    language,
    setLanguage,
    t,
  };

  return (
    <LanguageContext.Provider value={contextValue}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = (): LanguageContextType => {
  const context = useContext(LanguageContext);
  return context;
};

export const translations: Record<Language, TranslationShape> = {
  ru: {
    // Navigation
    "navigation.messages": "Сообщения",
    "navigation.groups": "Группы",
    "navigation.announcements": "Объявления",
    "navigation.requests": "Заявки",
    "navigation.contacts": "Контакты",
    "navigation.settings": "Настройки",
    "navigation.wiki": "Вики",
    "navigation.home": "Главная",
    "navigation.dashboard": "Панель управления",
    "navigation.profile": "Профиль",
    "navigation.users": "Пользователи",
    "navigation.admin": "Администрирование",

    // Header
    "header.title": "Корпоративный Мессенджер",
    
    // Common terms
    "common.loading": "Загрузка...",
    "common.error": "Ошибка",
    "common.save": "Сохранить",
    "common.cancel": "Отмена",
    "common.delete": "Удалить",
    "common.edit": "Редактировать",
    "common.create": "Создать",
    "common.submit": "Отправить",
    "common.confirm": "Подтвердить",
    "common.yes": "Да",
    "common.no": "Нет",
    "common.back": "Назад",
    "common.next": "Далее",
    "common.search": "Поиск",
    "common.filter": "Фильтр",
    "common.sortBy": "Сортировать по",
    "common.welcome": "Добро пожаловать",
    
    // Authentication
    "auth.login": "Вход",
    "auth.register": "Регистрация",
    "auth.logout": "Выход",
    "auth.email": "Электронная почта",
    "auth.password": "Пароль",
    "auth.username": "Имя пользователя",
    "auth.firstName": "Имя",
    "auth.lastName": "Фамилия",
    "auth.rememberMe": "Запомнить меня",
    "auth.forgotPassword": "Забыли пароль?",
    "auth.noAccount": "Нет учетной записи?",
    "auth.hasAccount": "Уже есть учетная запись?",
    "auth.createAccount": "Создать учетную запись",
    "auth.signIn": "Войти",
    "auth.signOut": "Выйти",
    "auth.invalidCredentials": "Неверная почта или пароль",
    "auth.loginSuccess": "Вход выполнен успешно",
    "auth.registerSuccess": "Регистрация выполнена успешно",
    "auth.logoutSuccess": "Выход выполнен успешно",
    
    // Call related
    "call.video": "Видеозвонок",
    "call.audio": "Голосовой звонок",
    "call.in_progress": "в процессе...",
    "call.end": "Завершить",
    
    // System information
    "system_info.title": "Информация о приложении",
    "system_info.connection_status": "Статус подключения",
    "system_info.app_version": "Версия приложения",
    "system_info.system_info": "Системная информация",
    "system_info.platform": "Платформа",
    "system_info.architecture": "Архитектура",
    "system_info.node_version": "Версия Node",
    "system_info.memory": "Память",
    "system_info.total_memory": "Всего памяти",
    "system_info.free_memory": "Свободно памяти",
    "system_info.used_memory": "Использовано памяти",
    "system_info.local_storage": "Локальное хранилище",
    "system_info.status": "Статус",
    "system_info.refresh": "Обновить информацию",
    
    // Connection status
    "connection.connected": "Подключено",
    "connection.offline": "Офлайн режим",
    "connection.connecting": "Подключение...",
    "connection.disconnected": "Отключено",
    "connection.open": "Подключено",
    "connection.closing": "Отключение...",
    "connection.closed": "Отключено",
    
    // Profile
    "profile.my_account": "Мой аккаунт",
    "profile.profile": "Профиль",
    "profile.settings": "Настройки",
    "profile.sign_out": "Выйти",
    "profile.signing_out": "Выход...",
    "profile.title": "Профиль",
    "profile.personalInfo": "Личная информация",
    "profile.changePassword": "Изменить пароль",
    "profile.updateProfile": "Обновить профиль",
    "profile.online": "В сети",
    "profile.offline": "Не в сети",
    "profile.status": "Статус",
    "profile.lastActive": "Последняя активность",
    "profile.joinDate": "Дата регистрации",
    "profile.contactInfo": "Контактная информация",
    "profile.phone": "Телефон",
    "profile.location": "Местоположение",
    "profile.department": "Отдел",
    "profile.position": "Должность",
    
    // Sidebar
    "sidebar.messages": "Сообщения",
    "sidebar.groups": "Группы",
    "sidebar.announcements": "Объявления",
    "sidebar.requests": "Заявки",
    "sidebar.contacts": "Контакты",
    "sidebar.settings": "Настройки",
    "sidebar.wiki": "Вики",
    "sidebar.new_messages": "Новые сообщения",
    "sidebar.close_sidebar": "Закрыть боковое меню",
    "sidebar.connection_status.online": "В сети",
    "sidebar.connection_status.offline": "Не в сети",
    "sidebar.connection_status.connecting": "Подключение...",
    "sidebar.connection_status.disconnected": "Отключено",
    
    // Settings
    "settings.title": "Настройки",
    "settings.general": "Общие",
    "settings.account": "Учетная запись",
    "settings.privacy": "Конфиденциальность",
    "settings.notifications": "Уведомления",
    "settings.appearance": "Внешний вид",
    "settings.language": "Язык",
    "settings.darkMode": "Темный режим",
    "settings.lightMode": "Светлый режим",
    "settings.theme": "Тема",
    "settings.sounds": "Звуки",
    "settings.emailNotifications": "Уведомления по электронной почте",
    "settings.pushNotifications": "Push-уведомления",
    "settings.desktopNotifications": "Уведомления на рабочем столе",
    "settings.saveChanges": "Сохранить изменения",
    "settings.changesApplied": "Изменения успешно применены",
    "settings.customizeAppearance": "Настройте внешний вид приложения",
    "settings.changeLanguage": "Измените язык приложения",
    "settings.manageAccount": "Управление учетной записью",
    "settings.managePrivacy": "Управление настройками конфиденциальности",
    "settings.manageNotifications": "Управление уведомлениями",
    "settings.emailNotificationsDescription": "Получайте уведомления на вашу электронную почту",
    "settings.pushNotificationsDescription": "Получайте уведомления в вашем браузере",
    "settings.desktopNotificationsDescription": "Получайте уведомления на рабочем столе",
    "settings.accountSettings": "Настройки учетной записи",
    "settings.privacySettings": "Настройки конфиденциальности",
    "settings.system": "Системная",
    "common.enabled": "включены",
    "common.disabled": "отключены",
    
    // Messages
    "messages.title": "Сообщения",
    "messages.newMessage": "Новое сообщение",
    "messages.sent": "Отправленные",
    "messages.received": "Полученные",
    "messages.send": "Отправить",
    "messages.reply": "Ответить",
    "messages.forward": "Переслать",
    "messages.typing": "печатает...",
    "messages.noMessages": "Нет сообщений",
    "messages.messageDeleted": "Сообщение удалено",
    "messages.enterMessage": "Введите сообщение",
    "messages.selectRecipient": "Выберите получателя",
    "messages.searchMessages": "Поиск сообщений",
    "messages.attachFile": "Прикрепить файл",
    "messages.readReceipts": "Отчеты о прочтении",
    "messages.messageSent": "Сообщение отправлено",
    
    // Groups
    "groups.title": "Группы",
    "groups.newGroup": "Новая группа",
    "groups.members": "Участники",
    "groups.addMember": "Добавить участника",
    "groups.removeMember": "Удалить участника",
    "groups.leaveGroup": "Покинуть группу",
    "groups.joinGroup": "Присоединиться к группе",
    "groups.groupCreated": "Группа создана",
    "groups.groupDeleted": "Группа удалена",
    "groups.groupUpdated": "Группа обновлена",
    "groups.groupInfo": "Информация о группе",
    "groups.groupName": "Название группы",
    "groups.groupDescription": "Описание группы",
    "groups.groupType": "Тип группы",
    "groups.searchGroups": "Поиск групп",
    "groups.noGroups": "Группы не найдены",
    "groups.createGroup": "Создать группу",
    
    // Requests
    "requests.title": "Заявки",
    "requests.newRequest": "Новая заявка",
    "requests.myRequests": "Мои заявки",
    "requests.allRequests": "Все заявки",
    "requests.pending": "Ожидание",
    "requests.inProgress": "В работе",
    "requests.completed": "Завершено",
    "requests.rejected": "Отклонено",
    "requests.requestType": "Тип заявки",
    "requests.priority": "Приоритет",
    "requests.deadlineDate": "Срок выполнения",
    "requests.requestNumber": "Номер заявки",
    "requests.requestDate": "Дата заявки",
    "requests.requester": "Заявитель",
    "requests.assignedTo": "Назначено",
    "requests.status": "Статус",
    "requests.details": "Детали",
    "requests.category": "Категория",
    "requests.cabinet": "Кабинет",
    "requests.description": "Описание",
    "requests.noRequests": "Заявки не найдены",
    "requests.createRequest": "Создать заявку",
    "requests.updateRequest": "Обновить заявку",
    "requests.requestCreated": "Заявка создана",
    "requests.requestUpdated": "Заявка обновлена",
    "requests.localNumber": "Внутренний номер",
    "requests.high": "Высокий",
    "requests.medium": "Средний",
    "requests.low": "Низкий",
    "requests.approve": "Одобрить",
    "requests.reject": "Отклонить",
    
    // Wiki
    "wiki.title": "Вики",
    "wiki.newArticle": "Новая статья",
    "wiki.editArticle": "Редактировать статью",
    "wiki.categories": "Категории",
    "wiki.articleTitle": "Заголовок статьи",
    "wiki.content": "Содержание",
    "wiki.author": "Автор",
    "wiki.createdAt": "Дата создания",
    "wiki.updatedAt": "Дата обновления",
    "wiki.viewArticle": "Просмотр статьи",
    "wiki.deleteArticle": "Удалить статью",
    "wiki.articleCreated": "Статья создана",
    "wiki.articleUpdated": "Статья обновлена",
    "wiki.articleDeleted": "Статья удалена",
    "wiki.noArticles": "Статьи не найдены",
    "wiki.searchArticles": "Поиск статей",
    "wiki.category": "Категория",
    "wiki.newCategory": "Новая категория",
    "wiki.editCategory": "Редактировать категорию",
    "wiki.deleteCategory": "Удалить категорию",
    "wiki.categoryName": "Название категории",
    "wiki.parentCategory": "Родительская категория",
    "wiki.saveChanges": "Сохранить изменения",
    "wiki.adminOnly": "Только для администраторов",
    "wiki.createArticle": "Создать статью",
    "wiki.relatedArticles": "Связанные статьи",
    "wiki.categoryCreated": "Категория создана",
    "wiki.categoryUpdated": "Категория обновлена",
    "wiki.categoryDeleted": "Категория удалена",
    
    // Announcements
    "announcements.title": "Объявления",
    "announcements.newAnnouncement": "Новое объявление",
    "announcements.editAnnouncement": "Редактировать объявление",
    "announcements.announcementTitle": "Заголовок объявления",
    "announcements.content": "Содержание",
    "announcements.author": "Автор",
    "announcements.createdAt": "Дата создания",
    "announcements.updatedAt": "Дата обновления",
    "announcements.viewAnnouncement": "Просмотр объявления",
    "announcements.deleteAnnouncement": "Удалить объявление",
    "announcements.announcementCreated": "Объявление создано",
    "announcements.announcementUpdated": "Объявление обновлено",
    "announcements.announcementDeleted": "Объявление удалено",
    "announcements.noAnnouncements": "Объявления не найдены",
    "announcements.searchAnnouncements": "Поиск объявлений",
    "announcements.important": "Важное",
    "announcements.pinned": "Закрепленное",
    "announcements.createAnnouncement": "Создать объявление",
    
    // Errors
    "errors.required": "Обязательное поле",
    "errors.invalidEmail": "Неверный формат электронной почты",
    "errors.passwordLength": "Пароль должен содержать не менее 6 символов",
    "errors.passwordMismatch": "Пароли не совпадают",
    "errors.somethingWentWrong": "Что-то пошло не так",
    "errors.unauthorized": "Несанкционированный доступ",
    "errors.notFound": "Не найдено",
    "errors.serverError": "Ошибка сервера",
    "errors.connectionError": "Ошибка соединения",
    "errors.invalidInput": "Неверный ввод",
    "errors.duplicateEntry": "Дублирующаяся запись",
    "errors.forbidden": "Доступ запрещен"
  },
  en: {
    // Navigation
    "navigation.messages": "Messages",
    "navigation.groups": "Groups",
    "navigation.announcements": "Announcements",
    "navigation.requests": "Requests",
    "navigation.contacts": "Contacts",
    "navigation.settings": "Settings",
    "navigation.wiki": "Wiki",
    "navigation.home": "Home",
    "navigation.dashboard": "Dashboard",
    "navigation.profile": "Profile",
    "navigation.users": "Users",
    "navigation.admin": "Admin",

    // Header
    "header.title": "Corporate Messenger",
    
    // Common terms
    "common.loading": "Loading...",
    "common.error": "Error",
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.create": "Create",
    "common.submit": "Submit",
    "common.confirm": "Confirm",
    "common.yes": "Yes",
    "common.no": "No",
    "common.back": "Back",
    "common.next": "Next",
    "common.search": "Search",
    "common.filter": "Filter",
    "common.sortBy": "Sort by",
    "common.welcome": "Welcome",
    
    // Authentication
    "auth.login": "Login",
    "auth.register": "Register",
    "auth.logout": "Logout",
    "auth.email": "Email",
    "auth.password": "Password",
    "auth.username": "Username",
    "auth.firstName": "First Name",
    "auth.lastName": "Last Name",
    "auth.rememberMe": "Remember me",
    "auth.forgotPassword": "Forgot password?",
    "auth.noAccount": "Don't have an account?",
    "auth.hasAccount": "Already have an account?",
    "auth.createAccount": "Create an account",
    "auth.signIn": "Sign in",
    "auth.signOut": "Sign out",
    "auth.invalidCredentials": "Invalid email or password",
    "auth.loginSuccess": "Login successful",
    "auth.registerSuccess": "Registration successful",
    "auth.logoutSuccess": "Logout successful",
    
    // Call related
    "call.video": "Video call",
    "call.audio": "Voice call",
    "call.in_progress": "in progress...",
    "call.end": "End Call",
    
    // System information
    "system_info.title": "Desktop App Information",
    "system_info.connection_status": "Connection Status",
    "system_info.app_version": "App Version",
    "system_info.system_info": "System Information",
    "system_info.platform": "Platform",
    "system_info.architecture": "Architecture",
    "system_info.node_version": "Node Version",
    "system_info.memory": "Memory",
    "system_info.total_memory": "Total Memory",
    "system_info.free_memory": "Free Memory",
    "system_info.used_memory": "Used Memory",
    "system_info.local_storage": "Local Storage",
    "system_info.status": "Status",
    "system_info.refresh": "Refresh System Info",
    
    // Connection status
    "connection.connected": "Connected",
    "connection.offline": "Offline Mode",
    "connection.connecting": "Connecting...",
    "connection.disconnected": "Disconnected",
    "connection.open": "Connected",
    "connection.closing": "Disconnecting...",
    "connection.closed": "Disconnected",
    
    // Profile
    "profile.my_account": "My Account",
    "profile.profile": "Profile",
    "profile.settings": "Settings",
    "profile.sign_out": "Sign out",
    "profile.signing_out": "Signing out...",
    "profile.title": "Profile",
    "profile.personalInfo": "Personal Information",
    "profile.changePassword": "Change Password",
    "profile.updateProfile": "Update Profile",
    "profile.online": "Online",
    "profile.offline": "Offline",
    "profile.status": "Status",
    "profile.lastActive": "Last active",
    "profile.joinDate": "Join date",
    "profile.contactInfo": "Contact Information",
    "profile.phone": "Phone",
    "profile.location": "Location",
    "profile.department": "Department",
    "profile.position": "Position",
    
    // Sidebar
    "sidebar.messages": "Messages",
    "sidebar.groups": "Groups",
    "sidebar.announcements": "Announcements",
    "sidebar.requests": "Requests",
    "sidebar.contacts": "Contacts",
    "sidebar.settings": "Settings",
    "sidebar.wiki": "Wiki",
    "sidebar.new_messages": "New messages",
    "sidebar.close_sidebar": "Close sidebar",
    "sidebar.connection_status.online": "Online",
    "sidebar.connection_status.offline": "Offline",
    "sidebar.connection_status.connecting": "Connecting...",
    "sidebar.connection_status.disconnected": "Disconnected",
    
    // Settings
    "settings.title": "Settings",
    "settings.general": "General",
    "settings.account": "Account",
    "settings.privacy": "Privacy",
    "settings.notifications": "Notifications",
    "settings.appearance": "Appearance",
    "settings.language": "Language",
    "settings.darkMode": "Dark Mode",
    "settings.lightMode": "Light Mode",
    "settings.theme": "Theme",
    "settings.sounds": "Sounds",
    "settings.emailNotifications": "Email Notifications",
    "settings.pushNotifications": "Push Notifications",
    "settings.desktopNotifications": "Desktop Notifications",
    "settings.saveChanges": "Save Changes",
    "settings.changesApplied": "Changes applied successfully",
    "settings.customizeAppearance": "Customize the appearance of your application",
    "settings.changeLanguage": "Change your application language",
    "settings.manageAccount": "Manage your account settings",
    "settings.managePrivacy": "Manage your privacy settings",
    "settings.manageNotifications": "Manage your notification settings",
    "settings.emailNotificationsDescription": "Receive notifications to your email",
    "settings.pushNotificationsDescription": "Receive notifications in your browser",
    "settings.desktopNotificationsDescription": "Receive notifications on your desktop",
    "settings.accountSettings": "Account settings",
    "settings.privacySettings": "Privacy settings",
    "settings.system": "System",
    "common.enabled": "enabled",
    "common.disabled": "disabled",
    
    // Messages
    "messages.title": "Messages",
    "messages.newMessage": "New Message",
    "messages.sent": "Sent",
    "messages.received": "Received",
    "messages.send": "Send",
    "messages.reply": "Reply",
    "messages.forward": "Forward",
    "messages.typing": "typing...",
    "messages.noMessages": "No messages yet",
    "messages.messageDeleted": "Message deleted",
    "messages.enterMessage": "Enter your message",
    "messages.selectRecipient": "Select recipient",
    "messages.searchMessages": "Search messages",
    "messages.attachFile": "Attach file",
    "messages.readReceipts": "Read receipts",
    "messages.messageSent": "Message sent",
    
    // Groups
    "groups.title": "Groups",
    "groups.newGroup": "New Group",
    "groups.members": "Members",
    "groups.addMember": "Add member",
    "groups.removeMember": "Remove member",
    "groups.leaveGroup": "Leave group",
    "groups.joinGroup": "Join group",
    "groups.groupCreated": "Group created",
    "groups.groupDeleted": "Group deleted",
    "groups.groupUpdated": "Group updated",
    "groups.groupInfo": "Group Information",
    "groups.groupName": "Group Name",
    "groups.groupDescription": "Group Description",
    "groups.groupType": "Group Type",
    "groups.searchGroups": "Search groups",
    "groups.noGroups": "No groups found",
    "groups.createGroup": "Create Group",
    
    // Requests
    "requests.title": "Requests",
    "requests.newRequest": "New Request",
    "requests.myRequests": "My Requests",
    "requests.allRequests": "All Requests",
    "requests.pending": "Pending",
    "requests.inProgress": "In Progress",
    "requests.completed": "Completed",
    "requests.rejected": "Rejected",
    "requests.requestType": "Request Type",
    "requests.priority": "Priority",
    "requests.deadlineDate": "Deadline Date",
    "requests.requestNumber": "Request Number",
    "requests.requestDate": "Request Date",
    "requests.requester": "Requester",
    "requests.assignedTo": "Assigned To",
    "requests.status": "Status",
    "requests.details": "Details",
    "requests.category": "Category",
    "requests.cabinet": "Cabinet",
    "requests.description": "Description",
    "requests.noRequests": "No requests found",
    "requests.createRequest": "Create Request",
    "requests.updateRequest": "Update Request",
    "requests.requestCreated": "Request created",
    "requests.requestUpdated": "Request updated",
    "requests.localNumber": "Local Number",
    "requests.high": "High",
    "requests.medium": "Medium",
    "requests.low": "Low",
    "requests.approve": "Approve",
    "requests.reject": "Reject",
    
    // Wiki
    "wiki.title": "Wiki",
    "wiki.newArticle": "New Article",
    "wiki.editArticle": "Edit Article",
    "wiki.categories": "Categories",
    "wiki.articleTitle": "Article Title",
    "wiki.content": "Content",
    "wiki.author": "Author",
    "wiki.createdAt": "Created At",
    "wiki.updatedAt": "Updated At",
    "wiki.viewArticle": "View Article",
    "wiki.deleteArticle": "Delete Article",
    "wiki.articleCreated": "Article created",
    "wiki.articleUpdated": "Article updated",
    "wiki.articleDeleted": "Article deleted",
    "wiki.noArticles": "No articles found",
    "wiki.searchArticles": "Search articles",
    "wiki.category": "Category",
    "wiki.newCategory": "New Category",
    "wiki.editCategory": "Edit Category",
    "wiki.deleteCategory": "Delete Category",
    "wiki.categoryName": "Category Name",
    "wiki.parentCategory": "Parent Category",
    "wiki.saveChanges": "Save Changes",
    "wiki.adminOnly": "Admin Only",
    "wiki.createArticle": "Create Article",
    "wiki.relatedArticles": "Related Articles",
    "wiki.categoryCreated": "Category created",
    "wiki.categoryUpdated": "Category updated",
    "wiki.categoryDeleted": "Category deleted",
    
    // Announcements
    "announcements.title": "Announcements",
    "announcements.newAnnouncement": "New Announcement",
    "announcements.editAnnouncement": "Edit Announcement",
    "announcements.announcementTitle": "Announcement Title",
    "announcements.content": "Content",
    "announcements.author": "Author",
    "announcements.createdAt": "Created At",
    "announcements.updatedAt": "Updated At",
    "announcements.viewAnnouncement": "View Announcement",
    "announcements.deleteAnnouncement": "Delete Announcement",
    "announcements.announcementCreated": "Announcement created",
    "announcements.announcementUpdated": "Announcement updated",
    "announcements.announcementDeleted": "Announcement deleted",
    "announcements.noAnnouncements": "No announcements found",
    "announcements.searchAnnouncements": "Search announcements",
    "announcements.important": "Important",
    "announcements.pinned": "Pinned",
    "announcements.createAnnouncement": "Create Announcement",
    
    // Errors
    "errors.required": "Required field",
    "errors.invalidEmail": "Invalid email address",
    "errors.passwordLength": "Password must be at least 6 characters",
    "errors.passwordMismatch": "Passwords do not match",
    "errors.somethingWentWrong": "Something went wrong",
    "errors.unauthorized": "Unauthorized access",
    "errors.notFound": "Not found",
    "errors.serverError": "Server error",
    "errors.connectionError": "Connection error",
    "errors.invalidInput": "Invalid input",
    "errors.duplicateEntry": "Duplicate entry",
    "errors.forbidden": "Access forbidden"
  },
};
